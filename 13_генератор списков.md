# Генераторы списков (List Comprehensions) в Python

## Теоретическая основа для собеседования

### 1. Основные понятия
- **Генератор списка** - компактный синтаксис для создания списков
- **Декларативный подход** - описание того, что нужно, а не как сделать
- **Оптимизация** - обычно работает быстрее обычных циклов

### 2. Преимущества перед циклами
- **Лаконичность** - меньше кода
- **Читаемость** - выразительный синтаксис
- **Производительность** - оптимизированная реализация
- **Функциональный стиль** - меньше побочных эффектов

### 3. Сравнение с другими подходами
| Подход | Количество строк | Производительность | Читаемость |
|--------|------------------|-------------------|------------|
| Обычный цикл | Много | Низкая | Средняя |
| Генератор списка | Одна | Высокая | Высокая |
| Функции map/filter | Среднее | Средняя | Низкая |

## 1. Базовый синтаксис

### Простой генератор
```python
numbers = [1, 2, 3, 4]
squared = [x**2 for x in numbers]
print(squared)  # [1, 4, 9, 16]
```

### Эквивалент с циклом
```python
numbers = [1, 2, 3, 4]
squared = []
for x in numbers:
    squared.append(x**2)
```

## 2. Условия в генераторах

### Фильтрация (if после цикла)
```python
even_squares = [x**2 for x in range(10) if x % 2 == 0]
print(even_squares)  # [0, 4, 16, 36, 64]
```

### Условное выражение (if-else перед циклом)
```python
numbers = [-2, -1, 0, 1, 2]
labels = ["отрицательное" if x < 0 else "положительное" for x in numbers]
print(labels)  # ['отрицательное', 'отрицательное', 'положительное', 'положительное', 'положительное']
```

### Составные условия
```python
result = [x for x in range(20) if x % 2 == 0 and x % 3 == 0]
print(result)  # [0, 6, 12, 18]
```

## 3. Вложенные генераторы

### Двойной цикл
```python
pairs = [(x, y) for x in [1, 2, 3] for y in ['a', 'b']]
print(pairs)  # [(1, 'a'), (1, 'b'), (2, 'a'), (2, 'b'), (3, 'a'), (3, 'b')]
```

### "Расплющивание" матрицы
```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flat = [num for row in matrix for num in row]
print(flat)  # [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### Транспонирование матрицы
```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
transposed = [[row[i] for row in matrix] for i in range(3)]
print(transposed)  # [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
```

## 4. Практические примеры

### Обработка пользовательского ввода
```python
user_input = "1,2,3,4,5"
numbers = [int(x.strip()) for x in user_input.split(",")]
print(numbers)  # [1, 2, 3, 4, 5]
```

### Работа со строками
```python
text = "Hello World"
uppercase_chars = [char.upper() for char in text if char != " "]
print(uppercase_chars)  # ['H', 'E', 'L', 'L', 'O', 'W', 'O', 'R', 'L', 'D']
```

### Фильтрация данных
```python
data = [{"name": "Alice", "age": 25}, {"name": "Bob", "age": 17}, {"name": "Charlie", "age": 30}]
adults = [person["name"] for person in data if person["age"] >= 18]
print(adults)  # ['Alice', 'Charlie']
```

## 5. Ограничения и лучшие практики

### Когда НЕ использовать генераторы
```python
# Слишком сложная логика
# Лучше использовать обычный цикл
result = []
for x in complex_data:
    if very_complex_condition(x):
        processed = complex_processing(x)
        result.append(processed)
```

### Сохранение читаемости
```python
# Плохо - слишком длинная строка
bad = [x**2 for x in some_very_long_variable_name if x % 2 == 0 and x > 10 and x < 100]

# Хорошо - разбить на части
good = [
    x**2 
    for x in some_very_long_variable_name 
    if x % 2 == 0 and x > 10 and x < 100
]
```

## Практические примеры

### Таблица умножения
```python
multiplication_table = [[x * y for x in range(1, 11)] for y in range(1, 11)]
for i, row in enumerate(multiplication_table, 1):
    print(f"{i:2}: {row}")
```

### Обработка вложенных структур
```python
nested_data = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]
even_numbers = [num for sublist in nested_data for num in sublist if num % 2 == 0]
print(even_numbers)  # [2, 4, 6, 8]
```

### Генератор с несколькими условиями
```python
numbers = range(1, 101)
result = [
    "FizzBuzz" if x % 15 == 0 else
    "Fizz" if x % 3 == 0 else
    "Buzz" if x % 5 == 0 else
    x
    for x in numbers
]
print(result[:20])  # Первые 20 элементов
```

## Вопросы для собеседования

1. **Чем генератор списка отличается от цикла for?**
   - Более компактный синтаксис, лучшая производительность

2. **Когда не стоит использовать генераторы списков?**
   - При сложной логике обработки или побочных эффектах

3. **Как работает вложенный генератор?**
   - Внешний цикл выполняется первым, затем внутренний

4. **Чем отличается if до и после цикла?**
   - if после - фильтрация, if до - условное выражение

5. **Как избежать слишком длинных генераторов?**
   - Разбивать на несколько строк или использовать функции

6. **Можно ли использовать методы в генераторах?**
   - Да, любые выражения Python: `[x.upper() for x in strings]`

7. **Как обработать исключения в генераторе?**
   - Через try-except в отдельной функции

8. **Чем генератор списка отличается от генераторного выражения?**
   - Генератор списка создает список сразу, генераторное выражение - лениво

9. **Как отслеживать индекс в генераторе?**
   - Через `enumerate()`: `[f"{i}:{x}" for i, x in enumerate(items)]`

10. **Когда генератор работает медленнее цикла?**
    - При очень больших данных и сложных условиях