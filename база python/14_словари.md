# Словари (dict) в Python

## Теоретическая основа для собеседования

### 1. Основные понятия
- **Словарь** - структура данных "ключ-значение"
- **Хэш-таблица** - лежащая в основе структура
- **Ассоциативный массив** - альтернативное название

### 2. Ключевые характеристики
- **Неупорядоченность** (до Python 3.7) / **упорядоченность** (Python 3.7+)
- **Изменяемость** - можно добавлять, изменять, удалять элементы
- **Уникальность ключей** - каждый ключ должен быть уникальным
- **Гетерогенность** - ключи и значения могут быть разных типов

### 3. Сравнение с другими структурами
| Характеристика | Словарь | Список | Множество |
|----------------|---------|--------|-----------|
| Доступ | По ключу | По индексу | Нет |
| Упорядоченность | ✅ (3.7+) | ✅ | ❌ |
| Уникальность ключей | ✅ | ❌ | ✅ |
| Изменяемость | ✅ | ✅ | ✅ |

## 1. Создание словарей

### Литерал словаря
```python
person = {
    "name": "Alice",
    "age": 30,
    "city": "Minsk"
}
```

### Функция dict()
```python
# Из именованных аргументов
person = dict(name="Alice", age=30, city="Minsk")

# Из списка кортежей
person = dict([("name", "Alice"), ("age", 30), ("city", "Minsk")])

# Из списка списков
person = dict([["name", "Alice"], ["age", 30], ["city", "Minsk"]])
```

### Словарное включение (Dictionary Comprehension)
```python
squares = {x: x**2 for x in range(5)}
print(squares)  # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

even_squares = {x: x**2 for x in range(10) if x % 2 == 0}
print(even_squares)  # {0: 0, 2: 4, 4: 16, 6: 36, 8: 64}
```

### Метод fromkeys()
```python
keys = ["name", "age", "city"]
default_dict = dict.fromkeys(keys)        # {'name': None, 'age': None, 'city': None}
default_dict = dict.fromkeys(keys, "")    # {'name': '', 'age': '', 'city': ''}
```

## 2. Основные операции

### Доступ к элементам
```python
person = {"name": "Alice", "age": 30}

# Прямой доступ (KeyError если нет ключа)
print(person["name"])  # Alice

# Метод get() (безопасный доступ)
print(person.get("name"))     # Alice
print(person.get("job"))      # None
print(person.get("job", "unknown"))  # unknown
```

### Изменение элементов
```python
person["age"] = 31           # Изменение
person["job"] = "Engineer"   # Добавление
```

### Удаление элементов
```python
# Оператор del
del person["city"]

# Метод pop()
age = person.pop("age")       # Удаляет и возвращает значение

# Метод popitem()
key, value = person.popitem() # Удаляет и возвращает последнюю пару

# Метод clear()
person.clear()                # Полная очистка
```

## 3. Объединение словарей

### Метод update()
```python
dict1 = {"a": 1, "b": 2}
dict2 = {"b": 3, "c": 4}
dict1.update(dict2)  # {'a': 1, 'b': 3, 'c': 4}
```

### Оператор | (Python 3.9+)
```python
dict1 = {"a": 1, "b": 2}
dict2 = {"b": 3, "c": 4}
merged = dict1 | dict2  # {'a': 1, 'b': 3, 'c': 4}
```

### Распаковка **
```python
dict1 = {"a": 1, "b": 2}
dict2 = {"c": 3, "d": 4}
merged = {**dict1, **dict2}  # {'a': 1, 'b': 2, 'c': 3, 'd': 4}
```

## 4. Проверка наличия ключей

### Оператор in
```python
person = {"name": "Alice", "age": 30}
print("name" in person)    # True
print("job" not in person) # True
```

### Методы keys(), values(), items()
```python
person = {"name": "Alice", "age": 30}

# Ключи
print(list(person.keys()))    # ['name', 'age']

# Значения  
print(list(person.values()))  # ['Alice', 30]

# Пары ключ-значение
print(list(person.items()))   # [('name', 'Alice'), ('age', 30)]
```

## Практические примеры

### Подсчет частоты элементов
```python
text = "hello world"
frequency = {}
for char in text:
    if char != " ":
        frequency[char] = frequency.get(char, 0) + 1
print(frequency)  # {'h': 1, 'e': 1, 'l': 3, 'o': 2, 'w': 1, 'r': 1, 'd': 1}
```

### Трансформация данных
```python
users = [
    {"name": "Alice", "age": 25},
    {"name": "Bob", "age": 30},
    {"name": "Charlie", "age": 35}
]

# Создание словаря имя -> возраст
user_dict = {user["name"]: user["age"] for user in users}
print(user_dict)  # {'Alice': 25, 'Bob': 30, 'Charlie': 35}
```

### Группировка данных
```python
people = [
    {"name": "Alice", "city": "Minsk"},
    {"name": "Bob", "city": "Moscow"}, 
    {"name": "Charlie", "city": "Minsk"}
]

# Группировка по городу
from collections import defaultdict
city_groups = defaultdict(list)
for person in people:
    city_groups[person["city"]].append(person["name"])

print(dict(city_groups))  # {'Minsk': ['Alice', 'Charlie'], 'Moscow': ['Bob']}
```

## Вопросы для собеседования

1. **Чем словарь отличается от списка?**
   - Доступ по ключу vs по индексу, хэширование ключей

2. **Какие типы могут быть ключами словаря?**
   - Только хэшируемые неизменяемые типы: строки, числа, кортежи

3. **Как избежать KeyError при доступе к несуществующему ключу?**
   - Использовать метод get() или проверять через in

4. **Как работает хэширование в словарях?**
   - Ключи хэшируются для быстрого доступа O(1) в среднем случае

5. **Чем отличается update() от оператора |?**
   - update() изменяет исходный словарь, | создает новый

6. **Как отследить порядок добавления элементов?**
   - В Python 3.7+ порядок сохраняется, в старых версиях - использовать OrderedDict

7. **Как создать словарь с default значением?**
   - defaultdict из collections или dict.get(key, default)

8. **Как инвертировать словарь (поменять ключи и значения)?**
   - {v: k for k, v in original_dict.items()}

9. **Как отсортировать словарь по ключам/значениям?**
   - sorted(dict.items(), key=lambda x: x[0]) или x[1]

10. **Когда использовать словарь, а когда список?**
    - Словарь - когда нужен доступ по уникальным ключам
    - Список - когда важен порядок и доступ по индексу