# Лямбда-функции в Python

## Базовая теория — что такое лямбда?
**Лямбда-функция** (анонимная функция) — это компактная однострочная конструкция для создания функции без имени. Она определяется с помощью ключевого слова `lambda` и возвращает выражение. Лямбда удобна для простых одноразовых вычислений, когда определять полноценную функцию через `def` избыточно.

Синтаксис:
```python
lambda аргументы: выражение
```

Особенности:
- Однострочная — только **одно выражение** (никаких нескольких операторов).
- Возвращает результат выражения автоматически (без `return`).
- Часто используется как аргумент для функций высшего порядка (`map`, `filter`, `sorted`, `reduce` и т.д.).
- При присвоении лямбды переменной она становится именованной переменной, но сама функция в отладчике всё равно будет иметь имя `<lambda>`.

---

## Примеры и объяснения

### 1. Обычная функция vs лямбда
```python
def double_def(x):
    return x * 2

double_lambda = lambda x: x * 2

print(double_def(5))      # 10
print(double_lambda(5))   # 10
```

> Совет: если логика простая — лямбда читаема. Если сложная — используйте `def`.

### 2. Использование с `map`
```python
numbers = [1, 2, 3, 4, 5]
squared = list(map(lambda x: x**2, numbers))
print(squared)  # [1, 4, 9, 16, 25]
```

### 3. Использование с `filter`
```python
nums = range(1, 20)
multi = list(map(lambda x: x * 10, nums))
filter_multi = list(filter(lambda x: x < 100, multi))
print(filter_multi)
```

### 4. Использование с `sorted` (ключ сортировки)
```python
words = ["apple", "banana", "orange", "grape", "pineapple", "citrus"]
words_sorted_by_length = sorted(words, key=lambda x: len(x))
print(words_sorted_by_length)
# ['apple', 'grape', 'banana', 'orange', 'citrus', 'pineapple']
```

### 5. Практический пример — сортировка сотрудников по возрасту
```python
employees = [
    {"name": "Иван", "age": 30},
    {"name": "Мария", "age": 25},
    {"name": "Петр", "age": 35},
    {"name": "Анна", "age": 28},
    {"name": "Сергей", "age": 32}
]

sorted_employees_by_age = sorted(employees, key=lambda x: x["age"], reverse=True)
print([(e["name"], e["age"]) for e in sorted_employees_by_age])
# [('Петр', 35), ('Сергей', 32), ('Иван', 30), ('Анна', 28), ('Мария', 25)]
```

### 6. Несколько аргументов в лямбде
```python
max_func = lambda a, b: a if a > b else b
print(max_func(10, 5))  # 10

multiply_func = lambda x, y, z: x * y * z
print(multiply_func(2, 3, 4))  # 24
```

### 7. `reduce` из `functools`
```python
from functools import reduce

numbers = [1, 2, 3, 4, 5]
result = reduce(lambda x, y: x + y, numbers)
print(result)  # 15
```

`reduce` последовательно применяет функцию к элементам последовательности, сводя её к одному значению.

---

## Ограничения и плохие практики

- **Только одно выражение.** Нельзя писать несколько операторов или использовать `return`/`yield` внутри лямбды.
- **Нельзя использовать оператор присваивания** `=` внутри лямбды (до Python 3.8 можно было использовать выражение-присваивание `:=`, но это тоже редко оправдано).
- **Отладка сложнее.** В трассировке стека имя будет `<lambda>`, поэтому сложные лямбды труднее анализировать.
- **Не злоупотреблять присвоением лямбд переменным.** Если лямбда используется более одного раза или логика становится сложной — лучше `def`.

---

## Примеры сортировки и поведения ключа
```python
lst = [7, 8, -1, 2, 3, 4, 5]
print(sorted(lst))  # [-1, 2, 3, 4, 5, 7, 8]

# Сортировка по остатку от деления на 2 (сначала чётные, затем нечётные)
sort_lst = sorted(lst, key=lambda x: x % 2)
print(sort_lst)  # [8, 2, 4, -1, 3, 5, 7]
```

---

## Рекомендации по использованию
- Используйте лямбду для простых выражений: небольшие трансформации, ключи сортировки, однострочные фильтры.  
- Для сложной логики — `def` с понятным именем и docstring.  
- Не делайте лямбд, длина которых ухудшает читаемость кода.  
- При необходимости профилирования/логирования давать явные имена через `def` предпочтительнее.

---

## Вопросы для собеседования (теория)

1. **Что такое лямбда-функция в Python?**  
   - Короткая анонимная функция, определяемая через `lambda`, содержащая одно выражение и возвращающая его результат.

2. **Чем лямбда отличается от обычной функции, определённой через `def`?**  
   - Лямбда — однострочная и анонимная, `def` — позволяет многострочную логику, документирование, аннотации и удобнее для отладки.

3. **Можно ли в лямбде использовать несколько операторов или присваивание?**  
   - Нет, лямбда допускает только одно выражение; оператор присваивания (`=`) внутри запрещён. Можно использовать выражение `:=` (assignment expression) аккуратно, но это редко нужно.

4. **В каких функциях стандартной библиотеки лямбда используется чаще всего?**  
   - `map`, `filter`, `sorted` (параметр `key`), `reduce` (из `functools`) и т.д.

5. **Почему иногда лучше использовать `def` вместо `lambda`?**  
   - Для улучшения читаемости, возможности писать многострочный код, добавлять docstring и удобной отладки.

6. **Что означает `<lambda>` в трассировке стека?**  
   - Это имя анонимной функции, используемой в вызове — отсутствие осмысленного имени усложняет отладку.

7. **Можно ли присваивать лямбду переменной? Это плохая практика?**  
   - Можно, но если лямбда используется многократно или сложна — лучше `def`. Присвоение само по себе не делает лямбду полноценной документируемой функцией.

8. **Можно ли в лямбде использовать `return`?**  
   - Нет, `return` не используется; результат выражения автоматически возвращается.

9. **Как лямбда ведёт себя с несколькими аргументами?**  
   - Принимает любое число позиционных аргументов, например: `lambda x, y: x + y`.

10. **Когда `reduce` предпочтительнее обычного цикла?**  
    - Когда нужно выразить последовательную свёртку коллекции в одно значение декларативно; но часто цикл или `sum`, `math.prod` будут более читабельны.
